<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Isabels julkalender üéÑ</title>
<style>

@font-face {
  font-family: 'MerryChristmas';
  src: url('LastChristmas_PERSONAL_USE_ONLY') format('opentype');
}
  body {
    margin: 0;
    font-family: 'MerryChristmas', cursive;
    background-image: url("IMG_6952.jpg"); /* byt till din bild */
    background-size: cover;
    background-position: center 25%;
    background-repeat: no-repeat;
    color: #fff;
    overflow-x: hidden;
    min-height: 100vh;
  }

  h1 {
    text-align: center;
    margin-top: 30px;
    color: gold;
    text-shadow: 2px 2px 5px #b30000;
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 20px;
    max-width: 800px;
    margin: 40px auto;
    padding: 10px;
  }

  .day {
    background: transparent;
    border: 2px solid rgb(255, 255, 255);  /* eller white */
    border-radius: 10px;
    aspect-ratio: 1 / 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    cursor: pointer;
    position: relative;
    transition: transform 0.2s, background 0.3s;
  }

  .day:hover {
    transform: scale(1.05);
    background: #cc0000;
  }

  .day.locked {
    background: #413e3e;
    opacity: 0.1  ;
    cursor: not-allowed;
    
  }

  .modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  .modal-content {
    background: #fff;
    color: #333;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    max-width: 400px;
    box-shadow: 0 0 10px #000;
  }

  .modal-content h2 {
    color: #b30000;
  }

  .close {
    margin-top: 15px;
    background: #b30000;
    color: #fff;
    border: none;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
  }

  /* Sn√∂effekt */
  .snowflake {
    position: fixed;
    top: -10px;
    color: white;
    font-size: 1em;
    user-select: none;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    z-index: 1;
  }

  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0.3; }
  }
  /* üîπ Tryckeffekt p√• touch */
.day:active {
  transform: scale(0.95);
  background: #8a0000;
}

/* üì± Mobilanpassning */
@media (max-width: 600px) {
  h1 {
    font-size: 1.5rem;
    margin: 20px 0;
  }

  .calendar {
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    padding: 8px;
  }

  .day {
    font-size: 1.4rem;
    border-radius: 8px;
  }

  .modal-content {
    width: 85%;
    font-size: 1rem;
  }

  .close {
    padding: 6px 12px;
    font-size: 0.9rem;
  }
  
}
/* üéØ Final-luckan (dag 24) */
.hint-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin: 10px 0 15px;
}

.hint-buttons button {
  background: #b30000;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
}

.hint-buttons button:hover {
  filter: brightness(1.05);
}

.answer-row {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 10px;
}

.answer-row input {
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  min-width: 200px;
}

.answer-row button {
  background: #165b33;
  color: #fff;
  border: none;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
}

.feedback {
  margin-top: 10px;
  font-weight: 700;
}
</style>
</head>
<body>

<h1>üéÖ Isabels julkalender üéÅ</h1>

<div class="calendar" id="calendar"></div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h2 id="modal-title"></h2>
    <p id="modal-text"></p>
    <button class="close" onclick="closeModal()">St√§ng</button>
  </div>
</div>

<script>
  // üéÑ Lucka 24: 3 ledtr√•dar + svarsruta
const finalChallenge = {
  answer: "hannes",
  hints: {
    1: "Ledtr√•d 1: 32 fyllda √•r nu, men var 24 n√§r han debuterade 2017 med singeln \"I went to the jungle.\",",
    2: "Ledtr√•d 2: Efter att ha gjort l√•tar med artister som Seinabo Sey och Waterbaby har han klivit fram i rampljuset.",
    3: "Ledtr√•d 3: Han sjunger √∂ver vyer av Stockholm och hans namn √§r Johannes minus \"Jo\"."
  }
};

function escapeHtml(str) {
  return String(str)
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#039;");
}

function showFinalHint(level) {
  const hintBox = document.getElementById("final-hint-box");
  hintBox.textContent = finalChallenge.hints[level] || "";
}

function checkFinalAnswer() {
  const input = document.getElementById("final-answer");
  const feedback = document.getElementById("final-feedback");
  const success = document.getElementById("final-success");

  const userAnswer = (input.value || "").trim().toLowerCase();

  if (userAnswer === finalChallenge.answer) {
    feedback.textContent = "";
    success.style.display = "block";
  } else {
    success.style.display = "none";
    feedback.textContent = "Inte riktigt‚Ä¶ prova igen ‚ù§Ô∏è";
  }
}

function finalModalHtml() {
  return `
    <div class="hint-buttons">
      <button type="button" onclick="showFinalHint(1)">Ledtr√•d 1</button>
      <button type="button" onclick="showFinalHint(2)">Ledtr√•d 2</button>
      <button type="button" onclick="showFinalHint(3)">Ledtr√•d 3</button>
    </div>

    <p id="final-hint-box" style="min-height: 48px; margin: 0 0 10px;"></p>

    <div class="answer-row">
      <input id="final-answer" type="text" placeholder="Skriv ditt svar h√§r‚Ä¶" autocomplete="off" />
      <button type="button" onclick="checkFinalAnswer()">Svara</button>
    </div>

    <div id="final-feedback" class="feedback"></div>

    <div id="final-success" style="display:none; margin-top: 14px;">
      <h3 style="margin: 0; color: #165b33;">Grattis du har klarat hela julkalendern! üéâ</h3>
      <p style="margin: 8px 0 0;">God Jul √§lskling! ‚ù§Ô∏è</p>
    </div>
  `;
}
  // üìù Ledtr√•dar ‚Äî √§ndra fritt!
  const clues = {
    1: "Ledtr√•d: Ditt paket ligger d√§r den vilandes √§nde m√∂ter symfoniernas stapel",
    2: "Ledtr√•d: P√• platsen vi sitter mest, i ett dolt fack din g√•va vilar som g√§st",
    3: "Ledtr√•d: Under platsen d√§r ens inre b√•de f√∂rd√§rvas men √§ven stillas, finner du n√•got du gillar",
    4: "Ledtr√•d: I nyansen av skogens djup, h√§nger jag i din privata d√∂rr",
    5: "Ledtr√•d: P√• platsen d√§r man hittar v√§rme under kalla dagar, v√§ntar en g√•va med √∂ppna armar",
    6: "Ledtr√•d: Efter trappens slut finner du den g√∂md, under r√∂tt tak en skatt kan bli gl√∂md",
    7: "Ledtr√•d: P√• platsen din k√§ra spenderar sin fritid, finner du n√•got som p√•minner om en varmare tid",
    8: "Ledtr√•d: H√§r tillagas det mesta, skynda dig innan det b√∂rjar hetta!",
    9: "Ledtr√•d: Under denna plats serveras heta b√∂nor i form av dryck, √∂ppna d√∂rren i ett knyck",
    10: "Ledtr√•d: H√§r √§ts det oftast middag och dryck, men se det fr√•n ett grodperspektiv och se n√•got nytt",
    11: "Ledtr√•d: I en l√•da fr√•n en annan tid, fylld med en relativt primitiv teknologi",
    12: "Ledtr√•d: I detta praktiska f√∂rem√•l i nyans av en gyttjep√∂l som √§r bra att ha n√§r man √§r p√• resande fot, hittar du du n√•got nytt",
    13: "Ledtr√•d: Trots en stor del av ett hem, √§r denna oftast bortgl√∂md, den kan ta dig fr√•n krig i rymden till ett vardagsrum p√• Manhattan",
    14: "Ledtr√•d: I en skimrande artificiell v√§xt du ser, n√•got som du i din v√§ska vill ha med",
    15: "Ledtr√•d: L√§ser du mellan raderna eller varf√∂r inte bakom titeln p√• en v√§lk√§nd filmserie, g√∂mmer sig en g√•va f√∂r dig",
    16: "Ledtr√•d: I detta f√∂rem√•l ger v√§rme och doft som tar dig till julaftons morgon, finner du din g√•va",
    17: "Ledtr√•d: I den h√§r l√•dan √§r dessa f√∂rem√•l packade som sillar, som ger ljus under vinterns m√∂rka timmar och doft n√§r h√∂gtidens speciella v√§xt inte finns",
    18: "Ledtr√•d: H√§r finns en samling av biografier och historier, det m√• inte vara den st√∂rsta men du finner n√•got f√∂r alla",
    19: "Ledtr√•d: En gammal v√§n fr√•n lucka 5, st√•r √•terigen med √∂ppnar armar och ger dig en ny g√•va",
  };

  // üéÑ Specialtider ‚Äî dagar som kan √∂ppnas tidigare (timme i 24-timmarsformat)
  // Exempel: 5: 10 betyder att 5 december √∂ppnas kl 10:00
  const specialUnlockTimes = {
    5: 8,
    10: 12,  // 10 dec √∂ppnas kl 14:00
    11: 14,
    13: 7,
    14: 11,
    17: 14,   // 17 dec √∂ppnas kl 12:00
    24: 10,
  };

  const calendar = document.getElementById('calendar');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalText = document.getElementById('modal-text');

  const totalDays = 24;
  const now = new Date();
  const currentDay = now.getDate();
  const currentMonth = now.getMonth() + 1;
  const currentTime = now.getHours() + now.getMinutes() / 60;

  for (let i = 1; i <= totalDays; i++) {
    const day = document.createElement('div');
    day.classList.add('day');
    day.textContent = i;

    let isLocked = true;

    if (currentMonth === 12) {
      if (currentDay > i) {
        isLocked = false; // tidigare dagar √∂ppna
      } else if (currentDay === i) {
        // üëá kolla om det finns specialtid f√∂r dagens datum
        const unlockHour = specialUnlockTimes[i] !== undefined ? specialUnlockTimes[i] : 16;
        if (currentTime >= unlockHour) {
          isLocked = false;
        }
      }
    }

    if (isLocked) {
      day.classList.add('locked');
      day.addEventListener('click', () => {
        const unlockHour = specialUnlockTimes[i] !== undefined ? specialUnlockTimes[i] : 16;
        alert(`Den h√§r luckan √∂ppnas kl. ${unlockHour}:00 den ${i} december üéÖ`);
      });
    } else {
      day.addEventListener('click', () => openModal(i));
    }

    calendar.appendChild(day);
  }

  function openModal(day) {
  modal.style.display = 'flex';
  modalTitle.textContent = `Lucka ${day}`;

  // Lucka 24: speciall√§ge med 3 ledtr√•dar + svar
  if (day === 24) {
    modalText.innerHTML = finalModalHtml();

    // Enter = "Svara"
    setTimeout(() => {
      const input = document.getElementById("final-answer");
      if (input) {
        input.focus();
        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter") checkFinalAnswer();
        });
      }
    }, 0);

    return;
  }

  // Vanliga luckor
  modalText.textContent = clues[day] || "Ingen ledtr√•d √§n üéÅ";
}
  function closeModal() {
    modal.style.display = 'none';
  }

  // Sn√∂effekt üé∂
  const snowflakeCount = 40;
  for (let i = 0; i < snowflakeCount; i++) {
    const snowflake = document.createElement('div');
    snowflake.classList.add('snowflake');
    snowflake.textContent = '‚ùÑ';
    snowflake.style.left = Math.random() * 100 + 'vw';
    snowflake.style.fontSize = (Math.random() * 14 + 10) + 'px';
    snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's';
    snowflake.style.animationDelay = Math.random() * 5 + 's';
    document.body.appendChild(snowflake);
  }
</script>